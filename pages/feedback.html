<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interview Performance Dashboard - PrepAI Interview Coach</title>
    <link rel="icon" type="image/x-icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>🤖</text></svg>">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background: #f8fafc;
            min-height: 100vh;
            color: #1e293b;
            line-height: 1.6;
        }
        
        .card {
            background: #ffffff;
            padding: 3rem;
            border-radius: 1.5rem;
            border: 1px solid #e2e8f0;
            margin: 2rem auto;
            max-width: 90rem;
            position: relative;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
        }
        
        .header-section {
            text-align: center;
            margin-bottom: 3rem;
            padding-bottom: 2rem;
            border-bottom: 1px solid #e2e8f0;
            position: relative;
        }
        
        .header-section::after {
            content: '';
            position: absolute;
            bottom: -1px;
            left: 50%;
            transform: translateX(-50%);
            width: 80px;
            height: 2px;
            background: #2563eb;
            border-radius: 1px;
        }
        
        .header-title {
            font-family: 'Playfair Display', serif;
            font-size: 2.75rem;
            font-weight: 700;
            color: #1e293b;
            margin-bottom: 1rem;
            letter-spacing: -0.02em;
            line-height: 1.2;
        }
        
        .header-subtitle {
            font-size: 1.25rem;
            color: #64748b;
            font-weight: 500;
            letter-spacing: -0.01em;
        }
        
        .personal-header {
            background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);
            border: 1px solid #e2e8f0;
            border-radius: 1rem;
            padding: 2rem;
            margin-bottom: 2rem;
            text-align: center;
            position: relative;
            overflow: hidden;
        }
        
        .personal-header h2 {
            font-family: 'Playfair Display', serif;
            font-size: 1.75rem;
            font-weight: 600;
            color: #1e293b;
            margin-bottom: 0.75rem;
        }
        
        .personal-header p {
            color: #64748b;
            font-size: 1.125rem;
            margin: 0;
            font-weight: 500;
        }
        
        .top-section {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 2.5rem;
            margin-bottom: 3rem;
        }
        
        .overall-score-card {
            background: linear-gradient(135deg, #ffffff 0%, #f8fafc 100%);
            border: 1px solid #e2e8f0;
            border-radius: 1.5rem;
            padding: 2.5rem;
            text-align: center;
            position: relative;
            overflow: hidden;
        }
        
        .overall-score-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, #2563eb, #3b82f6, #60a5fa);
        }
        
        .score-gauge {
            width: 160px;
            height: 160px;
            margin: 0 auto 2rem;
            position: relative;
        }
        
        .score-circle {
            width: 100%;
            height: 100%;
            border-radius: 50%;
            background: conic-gradient(#2563eb 0deg 280deg, #e2e8f0 280deg 360deg);
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            transition: all 0.5s ease;
        }
        
        .score-circle::before {
            content: '';
            position: absolute;
            width: 120px;
            height: 120px;
            background: white;
            border-radius: 50%;
            border: 8px solid #f8fafc;
        }
        
        .score-value {
            font-family: 'Playfair Display', serif;
            font-size: 3rem;
            font-weight: 700;
            color: #1e293b;
            z-index: 1;
        }
        
        .score-label {
            font-family: 'Playfair Display', serif;
            font-size: 1.5rem;
            font-weight: 600;
            color: #1e293b;
            margin-bottom: 1rem;
        }
        
        .score-description {
            color: #64748b;
            font-size: 1rem;
            line-height: 1.6;
            margin-bottom: 2rem;
        }
        
        .executive-summary {
            background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%);
            border: 1px solid #bae6fd;
            border-radius: 1rem;
            padding: 1.5rem;
            text-align: left;
        }
        
        .executive-summary h4 {
            font-family: 'Playfair Display', serif;
            font-size: 1.125rem;
            font-weight: 600;
            color: #0369a1;
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .executive-summary h4 .icon {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 24px;
            height: 24px;
            background: #0369a1;
            color: white;
            border-radius: 50%;
            font-weight: 700;
            font-size: 0.75rem;
        }
        
        .executive-summary p {
            color: #0c4a6e;
            font-size: 0.95rem;
            line-height: 1.6;
            margin: 0;
            font-weight: 500;
        }
        
        .dimension-performance-card {
            background: linear-gradient(135deg, #ffffff 0%, #f8fafc 100%);
            border: 1px solid #e2e8f0;
            border-radius: 1.5rem;
            padding: 2.5rem;
            text-align: center;
            position: relative;
            overflow: hidden;
        }
        
        .dimension-performance-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, #10b981, #34d399, #6ee7b7);
        }
        
        .dimension-performance-card h3 {
            font-family: 'Playfair Display', serif;
            font-size: 1.5rem;
            font-weight: 600;
            color: #1e293b;
            margin-bottom: 2rem;
            text-align: center;
        }
        
        .radar-chart-container {
            height: 400px;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        
        .radar-chart-container canvas {
            max-width: 100%;
            height: auto;
        }
        
        .dimension-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 2rem;
            margin-bottom: 3rem;
        }
        
        .dimension-card {
            background: #ffffff;
            border: 1px solid #e2e8f0;
            border-radius: 1.25rem;
            padding: 2rem;
            position: relative;
            transition: all 0.3s ease;
            box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06);
        }
        
        .dimension-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
        }
        
        .dimension-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
            padding-bottom: 1rem;
            border-bottom: 1px solid #f1f5f9;
        }
        
        .dimension-name {
            font-family: 'Playfair Display', serif;
            font-size: 1.25rem;
            font-weight: 600;
            color: #1e293b;
        }
        
        .dimension-score {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .score-badge {
            background: linear-gradient(135deg, #2563eb, #3b82f6);
            color: white;
            padding: 0.5rem 1rem;
            border-radius: 2rem;
            font-weight: 600;
            font-size: 0.875rem;
        }
        
        .confidence-indicator {
            background: #f1f5f9;
            color: #64748b;
            padding: 0.25rem 0.75rem;
            border-radius: 1rem;
            font-size: 0.75rem;
            font-weight: 500;
        }
        
        .dimension-content {
            text-align: left;
        }
        
        .content-section {
            margin-bottom: 1.5rem;
        }
        
        .content-section h4 {
            font-size: 0.875rem;
            font-weight: 600;
            color: #64748b;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            margin-bottom: 0.75rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .content-section h4 .icon {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 16px;
            height: 16px;
            background: #64748b;
            color: white;
            border-radius: 50%;
            font-weight: 700;
            font-size: 0.625rem;
        }
        
        .content-list {
            list-style: none;
            padding: 0;
            margin: 0;
        }
        
        .content-item {
            display: flex;
            align-items: flex-start;
            gap: 0.75rem;
            padding: 0.5rem 0;
            border-bottom: 1px solid #f8fafc;
        }
        
        .content-item:last-child {
            border-bottom: none;
        }
        
        .content-icon {
            color: #10b981;
            font-weight: 700;
            font-size: 1rem;
            margin-right: 0.5rem;
            flex-shrink: 0;
            margin-top: 0.125rem;
        }
        
        .content-item.improvement .content-icon {
            color: #f59e0b;
        }
        
        .content-text {
            color: #475569;
            font-size: 0.9rem;
            line-height: 1.5;
            margin: 0;
        }
        
        .quote-item {
            background: #f8fafc;
            border-left: 3px solid #2563eb;
            padding: 0.75rem;
            margin: 0.5rem 0;
            border-radius: 0.5rem;
            font-style: italic;
            color: #374151;
            font-size: 0.875rem;
        }
        
        .seniority-insights {
            background: linear-gradient(135deg, #f0fdf4 0%, #dcfce7 100%);
            border: 1px solid #bbf7d0;
            border-radius: 1rem;
            padding: 1.5rem;
            margin-bottom: 2rem;
        }
        
        .seniority-insights h3 {
            font-family: 'Playfair Display', serif;
            font-size: 1.25rem;
            font-weight: 600;
            color: #166534;
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .seniority-insights h3 .icon {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 24px;
            height: 24px;
            background: #166534;
            color: white;
            border-radius: 50%;
            font-weight: 700;
            font-size: 0.75rem;
        }
        
        .insight-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1.5rem;
        }
        
        .insight-item {
            background: white;
            border: 1px solid #bbf7d0;
            border-radius: 0.75rem;
            padding: 1.25rem;
        }
        
        .insight-item h4 {
            font-size: 1rem;
            font-weight: 600;
            color: #166534;
            margin-bottom: 0.75rem;
        }
        
        .insight-item p {
            color: #15803d;
            font-size: 0.9rem;
            line-height: 1.5;
            margin: 0;
        }
        
        .interview-quality {
            background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%);
            border: 1px solid #fbbf24;
            border-radius: 1rem;
            padding: 1.5rem;
            margin-bottom: 2rem;
        }
        
        .interview-quality h3 {
            font-family: 'Playfair Display', serif;
            font-size: 1.25rem;
            font-weight: 600;
            color: #92400e;
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .interview-quality h3 .icon {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 24px;
            height: 24px;
            background: #92400e;
            color: white;
            border-radius: 50%;
            font-weight: 700;
            font-size: 0.75rem;
        }
        
        .quality-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1.5rem;
        }
        
        .quality-item {
            background: white;
            border: 1px solid #fbbf24;
            border-radius: 0.75rem;
            padding: 1.25rem;
        }
        
        .quality-item h4 {
            font-size: 1rem;
            font-weight: 600;
            color: #92400e;
            margin-bottom: 0.75rem;
        }
        
        .quality-item p {
            color: #a16207;
            font-size: 0.9rem;
            line-height: 1.5;
            margin: 0;
        }
        
        .action-buttons {
            display: flex;
            gap: 1rem;
            justify-content: center;
            margin-top: 3rem;
            flex-wrap: wrap;
        }
        
        .btn-primary {
            background: linear-gradient(135deg, #2563eb, #3b82f6);
            color: white;
            padding: 1rem 2rem;
            border: none;
            border-radius: 0.75rem;
            font-weight: 600;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px -5px rgba(37, 99, 235, 0.3);
        }
        
        .btn-secondary {
            background: white;
            color: #2563eb;
            padding: 1rem 2rem;
            border: 2px solid #2563eb;
            border-radius: 0.75rem;
            font-weight: 600;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .btn-secondary:hover {
            background: #2563eb;
            color: white;
            transform: translateY(-2px);
        }
        
        .back-btn {
            position: fixed;
            top: 2rem;
            left: 2rem;
            background: white;
            color: #64748b;
            padding: 0.75rem 1.5rem;
            border: 1px solid #e2e8f0;
            border-radius: 0.75rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            z-index: 1000;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
        }
        
        .back-btn:hover {
            background: #f8fafc;
            color: #374151;
            transform: translateY(-2px);
        }
        
        .hidden { display: none; }
        
        .screen-container {
            display: flex;
            flex-direction: column;
            justify-content: center;
            min-height: 100vh;
            padding: 2rem;
        }
        
        .loader { 
            border: 4px solid #f3f3f3; 
            border-top: 4px solid #2563eb; 
            border-radius: 50%; 
            width: 50px; 
            height: 50px; 
            animation: spin 1s linear infinite; 
        }
        
        @keyframes spin { 
            0% { transform: rotate(0deg); } 
            100% { transform: rotate(360deg); } 
        }
        
        /* Responsive Design */
        @media (max-width: 768px) {
            .top-section {
                grid-template-columns: 1fr;
            }
            
            .dimension-grid {
                grid-template-columns: 1fr;
            }
            
            .card {
                padding: 2rem;
                margin: 1rem;
            }
            
            .header-title {
                font-size: 2rem;
            }
            
            .score-gauge {
                width: 140px;
                height: 140px;
            }
            
            .score-value {
                font-size: 2.5rem;
            }
            
            .back-btn {
                position: relative;
                top: auto;
                left: auto;
                margin-bottom: 1rem;
            }
        }
    </style>
</head>
<body class="text-gray-800">

    <!-- Back Button -->
    <button id="back-to-homepage-btn" class="back-btn flex items-center gap-2">
        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
        </svg>
        <span class="hidden sm:inline">Back</span>
    </button>

    <div id="app-container" class="container mx-auto max-w-7xl">

        <!-- Loading Screen -->
        <div id="loading-screen" class="screen-container">
            <div class="card text-center">
                <div class="w-24 h-24 mx-auto mb-6 bg-blue-100 rounded-full flex items-center justify-center">
                    <svg class="w-12 h-12 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                    </svg>
                </div>
                <h2 class="text-4xl font-bold text-gray-900 mb-4">Analyzing Your Performance...</h2>
                <p class="text-xl text-gray-600 mb-8">Generating your comprehensive performance dashboard.</p>
                <div class="flex justify-center mb-6">
                    <div class="loader"></div>
                </div>
                <p class="text-lg text-gray-500">This may take a few moments...</p>
                <div class="mt-8 text-sm text-gray-400">
                    <p>Our AI is carefully analyzing your responses</p>
                    <p>to provide actionable insights and recommendations</p>
                </div>
            </div>
        </div>

        <!-- Performance Dashboard -->
        <div id="feedback-screen" class="hidden">
            <div class="card">
                <!-- Professional Header -->
                <div class="header-section">
                    <h1 class="header-title">Interview Performance Dashboard</h1>
                    <p class="header-subtitle">Comprehensive dimension-by-dimension analysis for strategic career growth</p>
                </div>
                
                <!-- Personal Header -->
                <div class="personal-header">
                    <h2>Performance Assessment Report</h2>
                    <p id="role-context">Senior Software Engineer Assessment for System Design | 30 August 2025</p>
                </div>
                
                <!-- Top Section: Overall Score + Dimension Performance Radar -->
                <div class="top-section">
                    <!-- Overall Score Card -->
                    <div class="overall-score-card">
                        <div class="score-gauge">
                            <div id="score-circle" class="score-circle">
                                <span id="score-value" class="score-value">--</span>
                            </div>
                        </div>
                        <h3 id="score-label" class="score-label">Loading...</h3>
                        <p id="score-description" class="score-description">Analyzing your performance...</p>
                        
                        <!-- Executive Summary -->
                        <div class="executive-summary">
                            <h4>
                                <span class="icon">📊</span>
                                Executive Summary
                            </h4>
                            <p id="executive-summary-text">The candidate demonstrated exceptional problem-solving abilities and strong leadership potential. Their communication skills are outstanding, and they show solid technical foundations. The primary growth opportunity lies in developing strategic thinking and deepening technical expertise in emerging technologies.</p>
                        </div>
                    </div>
                    
                    <!-- Dimension Performance Radar -->
                    <div class="dimension-performance-card">
                        <h3>Dimension Performance Overview</h3>
                        <div class="radar-chart-container">
                            <canvas id="radarChart" width="400" height="400"></canvas>
                        </div>
                    </div>
                </div>
                
                <!-- Dimension-by-Dimension Performance Grid -->
                <div id="dimension-grid" class="dimension-grid">
                    <!-- Dynamic dimension cards will be inserted here -->
                </div>
                
                <!-- Seniority-Specific Insights -->
                <div id="seniority-insights" class="seniority-insights hidden">
                    <h3>
                        <span class="icon">🎯</span>
                        Seniority-Specific Insights
                    </h3>
                    <div id="insight-grid" class="insight-grid">
                        <!-- Dynamic insight items will be inserted here -->
                    </div>
                </div>
                
                <!-- Interview Quality Analysis -->
                <div id="interview-quality" class="interview-quality hidden">
                    <h3>
                        <span class="icon">🔍</span>
                        Interview Quality Analysis
                    </h3>
                    <div id="quality-grid" class="quality-grid">
                        <!-- Dynamic quality items will be inserted here -->
                    </div>
                </div>

                <!-- Action Buttons -->
                <div class="action-buttons">
                    <button id="review-answers-btn" class="btn-primary">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
                        </svg>
                        Review My Answers
                    </button>
                    <button id="start-new-interview-btn" class="btn-secondary">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path>
                        </svg>
                        Start New Interview
                    </button>
                </div>
            </div>
        </div>

        <!-- Error Screen -->
        <div id="error-screen" class="hidden screen-container">
            <div class="card text-center">
                <div class="w-24 h-24 mx-auto mb-6 bg-red-100 rounded-full flex items-center justify-center">
                    <svg class="w-12 h-12 text-red-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                    </svg>
                </div>
                <h3 class="text-2xl font-semibold text-red-800 mb-3">Unable to Generate Dashboard</h3>
                <p class="text-red-600 mb-6 text-lg">We encountered an issue while analyzing your interview. Please try again.</p>
                <div class="flex flex-col sm:flex-row gap-4 justify-center">
                    <button id="retry-feedback-btn" class="btn-primary">
                        Try Again
                    </button>
                    <button id="skip-feedback-btn" class="btn-secondary">
                        Skip Dashboard
                    </button>
                </div>
            </div>
        </div>

    </div>

    <!-- Load shared utilities first -->
    <script src="../js/shared/state.js"></script>
    <script src="../js/shared/utils.js"></script>
    <script src="../js/shared/security.js"></script>
    <script src="../js/shared/error-handler.js"></script>
    <script src="../js/shared/performance.js"></script>
    <script src="../config.js"></script>
    
    <!-- Load page-specific JavaScript -->
    <script src="../js/pages/feedback.js"></script>
</body>
</html>
