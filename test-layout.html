<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interview Layout Test</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f8fafc;
        }
        .hidden { display: none; }
        .screen-container {
            display: flex;
            flex-direction: column;
            height: 100vh;
            padding: 1rem;
            overflow: hidden;
        }
        .card {
            background-color: white;
            padding: 2rem;
            border-radius: 1rem;
            box-shadow: 0 10px 15px -3px rgba(0,0,0,0.1), 0 4px 6px -2px rgba(0,0,0,0.05);
            border: 1px solid rgba(0,0,0,0.05);
        }
        
        /* Message Formatting Styles */
        .message {
            display: flex !important;
            flex-direction: column !important;
            margin-bottom: 1.5rem !important;
            max-width: 80% !important;
        }

        .message.ai {
            align-self: flex-start !important;
            margin-right: auto !important;
        }

        .message.user {
            align-self: flex-end !important;
            margin-left: auto !important;
        }

        .message-bubble {
            padding: 1rem 1.25rem;
            border-radius: 1.25rem;
            position: relative;
            word-wrap: break-word;
            line-height: 1.5;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.08);
        }

        .message.ai .message-bubble {
            background: #f8fafc;
            color: #1e293b;
            border: 1px solid #f1f5f9;
            border-bottom-left-radius: 0.5rem;
        }

        .message.user .message-bubble {
            background: #ffffff;
            color: #1e293b;
            border: 1px solid #f1f5f9;
            border-bottom-right-radius: 0.5rem;
        }

        .message-meta {
            font-size: 0.75rem;
            color: #94a3b8;
            margin-top: 0.5rem;
            font-weight: 400;
        }

        .message.ai .message-meta {
            text-align: left;
            margin-left: 0.5rem;
        }

        .message.user .message-meta {
            text-align: right;
            margin-right: 0.5rem;
        }

        /* Chat container enhancements */
        #chat-messages {
            scroll-behavior: smooth;
        }

        #chat-messages::-webkit-scrollbar {
            width: 6px;
        }

        #chat-messages::-webkit-scrollbar-track {
            background: #f8fafc;
            border-radius: 3px;
        }

        #chat-messages::-webkit-scrollbar-thumb {
            background: #e2e8f0;
            border-radius: 3px;
        }

        #chat-messages::-webkit-scrollbar-thumb:hover {
            background: #cbd5e1;
        }
    </style>
</head>
<body class="text-gray-800">

    <!-- Test Layout -->
    <div class="screen-container">
        <div class="max-w-7xl mx-auto w-full px-4">
            <!-- Test Interview Interface -->
            <div id="interview-interface" class="flex flex-col flex-1">
                <!-- Test Header -->
                <div class="card w-full mb-4">
                    <div class="flex justify-between items-start">
                        <div class="flex-1">
                            <h2 class="text-2xl font-bold text-gray-900 mb-2">Layout Test - AI Interview Session</h2>
                            <p class="text-gray-600">Testing message positioning and viewport height</p>
                        </div>
                        <div class="text-right">
                            <div class="text-sm font-semibold text-gray-600 mb-2">Test Duration</div>
                            <div class="text-4xl font-mono font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent">05:42</div>
                        </div>
                    </div>
                </div>

                <!-- Test Chat Area -->
                <div class="card w-full overflow-hidden flex flex-col flex-1">
                    <!-- Chat Header -->
                    <div class="px-6 py-4 border-b border-gray-200 bg-gradient-to-r from-gray-50 to-white">
                        <div class="flex items-center justify-between">
                            <div class="flex items-center space-x-3">
                                <div class="w-8 h-8 bg-gradient-to-br from-blue-600 to-purple-600 rounded-lg flex items-center justify-center">
                                    <svg class="w-5 h-5 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8s9 3.582 9 8-9-8-9-8z"></path>
                                    </svg>
                                </div>
                                <div>
                                    <h3 class="font-semibold text-gray-900 text-lg">Layout Test Session</h3>
                                    <p class="text-sm text-gray-600">Testing message positioning</p>
                                </div>
                            </div>
                            <div class="flex items-center space-x-3">
                                <button class="text-gray-500 hover:text-gray-700 hover:bg-gray-100 py-2 px-3 rounded-lg transition duration-200 flex items-center gap-2">
                                    <span class="text-xs font-medium">Test Mode</span>
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Chat Messages Container - FIXED VERSION -->
                    <div id="chat-messages" class="px-6 py-4 flex-1 overflow-y-auto bg-white">
                        
                        <!-- Test AI Message -->
                        <div class="message ai">
                            <div class="message-bubble">
                                <p>Hi there! Thanks for taking the time to interview with me today. I'm excited to learn more about your experience. This portion of the interview will focus on execution, particularly your experience with Agile processes and stakeholder coordination. Let's dive right in.</p>
                            </div>
                            <div class="message-meta">11:18:46 PM</div>
                        </div>

                        <!-- Test User Message -->
                        <div class="message user">
                            <div class="message-bubble">
                                <p>Hi there! Thank you for the opportunity. I'm excited to discuss my experience with Agile processes and stakeholder coordination.</p>
                            </div>
                            <div class="message-meta">11:19:55 PM</div>
                        </div>

                        <!-- Test AI Follow-up -->
                        <div class="message ai">
                            <div class="message-bubble">
                                <p>Great! Let's start with a specific scenario. Can you tell me about a time when you had to coordinate multiple stakeholders with conflicting priorities in an Agile environment? How did you handle the situation and what was the outcome?</p>
                            </div>
                            <div class="message-meta">11:19:58 PM</div>
                        </div>

                        <!-- Test User Response -->
                        <div class="message user">
                            <div class="message-bubble">
                                <p>Sure! In my previous role as a Product Manager at TechCorp, I was working on a major feature release that involved three different teams: Engineering, Design, and Marketing. Each team had different priorities and timelines.</p>
                            </div>
                            <div class="message-meta">11:21:15 PM</div>
                        </div>

                        <!-- Test AI Message -->
                        <div class="message ai">
                            <div class="message-bubble">
                                <p>That sounds like a complex situation! Can you walk me through the specific steps you took to align these teams? I'm particularly interested in how you managed the conflicting timelines.</p>
                            </div>
                            <div class="message-meta">11:21:20 PM</div>
                        </div>

                        <!-- Test User Response -->
                        <div class="message user">
                            <div class="message-bubble">
                                <p>Absolutely. First, I organized a stakeholder alignment meeting where I facilitated a discussion about the overall business objectives. I used a prioritization matrix to help everyone understand the trade-offs between speed, quality, and scope.</p>
                            </div>
                            <div class="message-meta">11:22:45 PM</div>
                        </div>

                        <!-- Additional messages to test scrolling -->
                        <div class="message ai">
                            <div class="message-bubble">
                                <p>Excellent approach! How did you handle pushback when some stakeholders weren't initially willing to compromise on their priorities?</p>
                            </div>
                            <div class="message-meta">11:22:50 PM</div>
                        </div>

                        <div class="message user">
                            <div class="message-bubble">
                                <p>That's a great question. I found that data-driven discussions were most effective. I presented user research data and business metrics to show how each decision would impact our key objectives.</p>
                            </div>
                            <div class="message-meta">11:24:10 PM</div>
                        </div>

                    </div>

                    <!-- Test Input Area -->
                    <div class="px-6 py-4 border-t border-gray-200 bg-gray-50">
                        <div class="relative">
                            <input 
                                type="text"
                                class="w-full py-3 px-4 pr-12 border border-gray-300 rounded-lg focus:outline-none focus:border-gray-400 transition-all duration-200 font-medium text-gray-800 placeholder-gray-400" 
                                placeholder="Type your response here..." 
                                value="This is a test input to verify positioning..."
                            />
                            <button class="absolute right-3 top-1/2 -translate-y-1/2 w-8 h-8 bg-gray-500 hover:bg-gray-600 rounded-full transition-all duration-200 flex items-center justify-center">
                                <svg class="w-4 h-4 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 19l9 2-9-18-9 18 9-2zm0 0v-8"></path>
                                </svg>
                            </button>
                        </div>
                        
                        <!-- Test Status -->
                        <div class="mt-3 text-center">
                            <p class="text-sm text-green-600 font-medium">✅ Layout Test - No Scrolling Required</p>
                            <p class="text-xs text-gray-500 mt-1">Messages should be properly aligned (AI left, User right) with no overlap</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Test scroll functionality
        document.addEventListener('DOMContentLoaded', function() {
            const chatMessages = document.getElementById('chat-messages');
            chatMessages.scrollTop = chatMessages.scrollHeight;
            
            // Add some debug info
            console.log('📊 Layout Test Results:');
            console.log('Chat container height:', chatMessages.offsetHeight);
            console.log('Chat scroll height:', chatMessages.scrollHeight);
            console.log('Viewport height:', window.innerHeight);
            console.log('Container uses flex-1:', chatMessages.classList.contains('flex-1'));
            console.log('Container has overflow-y-auto:', chatMessages.classList.contains('overflow-y-auto'));
            
            // Test if layout fits viewport
            const screenContainer = document.querySelector('.screen-container');
            const fitsViewport = screenContainer.offsetHeight <= window.innerHeight;
            console.log('✅ Fits in viewport:', fitsViewport);
            
            // Test message alignment
            const aiMessages = document.querySelectorAll('.message.ai');
            const userMessages = document.querySelectorAll('.message.user');
            console.log('🤖 AI messages count:', aiMessages.length);
            console.log('👤 User messages count:', userMessages.length);
            
            // Check for overlaps (simplified test)
            const messages = document.querySelectorAll('.message');
            let hasOverlap = false;
            for (let i = 0; i < messages.length - 1; i++) {
                const current = messages[i].getBoundingClientRect();
                const next = messages[i + 1].getBoundingClientRect();
                if (current.bottom > next.top) {
                    hasOverlap = true;
                    console.log('❌ Overlap detected between message', i, 'and', i + 1);
                }
            }
            
            if (!hasOverlap) {
                console.log('✅ No message overlaps detected');
            }
        });
    </script>

</body>
</html>
