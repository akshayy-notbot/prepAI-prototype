<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PrepAI - AI Interview Coach</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f8fafc;
        }
        .hidden { display: none; }
        .screen-container {
            display: flex;
            flex-direction: column;
            justify-content: center;
            min-height: 100vh;
            padding: 1rem;
        }
        .card {
            background-color: white;
            padding: 2rem;
            border-radius: 1rem;
            box-shadow: 0 10px 15px -3px rgba(0,0,0,0.1), 0 4px 6px -2px rgba(0,0,0,0.05);
        }
        .chat-bubble { max-width: 75%; padding: 12px 16px; border-radius: 16px; word-wrap: break-word; }
        .chat-bubble-user { background-color: #2563eb; color: white; border-bottom-right-radius: 4px; }
        .chat-bubble-ai { background-color: #e5e7eb; color: #1f2937; border-bottom-left-radius: 4px; }
        .loader { border: 4px solid #f3f3f3; border-top: 4px solid #3498db; border-radius: 50%; width: 40px; height: 40px; animation: spin 1s linear infinite; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
        .choice-button { transition: all 0.2s ease-in-out; }
        .choice-button:hover { transform: translateY(-2px); box-shadow: 0 4px 12px rgba(0,0,0,0.1); }
        details > summary { list-style: none; }
        details > summary::-webkit-details-marker { display: none; }
    </style>
</head>
<body class="text-gray-800">

    <div id="app-container" class="container mx-auto max-w-3xl">

        <!-- Act I, Scene 1: Homepage -->
        <div id="homepage-screen" class="screen-container">
            <div class="card text-center">
                <h1 class="text-4xl md:text-5xl font-bold text-gray-900">Go from Interview Anxiety to a Confident "Yes."</h1>
                <p class="text-lg text-gray-600 mt-4">Practice with our AI-powered interviewer, get instant, actionable feedback, and ace the hiring process for your dream job.</p>
                <button id="start-onboarding-btn" class="mt-8 w-full md:w-auto bg-blue-600 text-white font-bold py-4 px-8 rounded-lg hover:bg-blue-700 transition duration-300 text-lg">Start Your First Free Mock Interview</button>
                <div class="mt-8">
                    <p class="text-sm text-gray-500 uppercase tracking-wider">TRUSTED BY CANDIDATES HIRED AT</p>
                    <div class="flex justify-center items-center gap-8 mt-4 text-gray-400">
                        <span class="font-bold">Google</span>
                        <span class="font-bold">Amazon</span>
                        <span class="font-bold">Meta</span>
                        <span class="font-bold">Netflix</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Act I, Scene 2, Step 1: Onboarding - Role -->
        <div id="onboarding-role-screen" class="hidden screen-container">
            <div class="card text-center">
                <h2 class="text-3xl font-bold text-gray-900">What role are you preparing for?</h2>
                <div class="mt-6">
                    <select id="role-input" class="w-full p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500">
                        <option value="">Select a role...</option>
                        <option value="Product Manager">Product Manager</option>
                        <option value="Software Engineer">Software Engineer</option>
                        <option value="Data Analyst">Data Analyst</option>
                    </select>
                </div>
                <button id="role-next-btn" class="mt-6 w-full bg-blue-600 text-white font-bold py-3 px-4 rounded-md hover:bg-blue-700 transition duration-300">Next</button>
            </div>
        </div>

        <!-- Act I, Scene 2, Step 2: Onboarding - Experience -->
        <div id="onboarding-experience-screen" class="hidden screen-container">
            <div class="card text-center">
                <h2 class="text-3xl font-bold text-gray-900">What's your experience level?</h2>
                <p class="text-lg text-gray-600 mt-2 mb-8">This helps us calibrate the difficulty and type of questions.</p>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-5">
                    <button onclick="handleExperienceSelect('Student/Intern')" class="choice-button p-6 bg-gray-100 rounded-lg text-left hover:bg-blue-50">
                        <h3 class="text-lg font-semibold">Student / Intern</h3>
                    </button>
                    <button onclick="handleExperienceSelect('Junior / Mid-Level')" class="choice-button p-6 bg-gray-100 rounded-lg text-left hover:bg-blue-50">
                        <h3 class="text-lg font-semibold">Junior / Mid-Level</h3>
                    </button>
                    <button onclick="handleExperienceSelect('Senior')" class="choice-button p-6 bg-gray-100 rounded-lg text-left hover:bg-blue-50">
                        <h3 class="text-lg font-semibold">Senior</h3>
                    </button>
                    <button onclick="handleExperienceSelect('Manager / Lead')" class="choice-button p-6 bg-gray-100 rounded-lg text-left hover:bg-blue-50">
                        <h3 class="text-lg font-semibold">Manager / Lead</h3>
                    </button>
                </div>
            </div>
        </div>

        <!-- Act I, Scene 2, Step 3: Onboarding - Skills to Practice -->
        <div id="onboarding-skills-screen" class="hidden screen-container">
            <div class="card text-center">
                <h2 class="text-3xl font-bold text-gray-900">What skills would you like to practice?</h2>
                <p class="text-lg text-gray-600 mt-2 mb-8">Select the skills you want to focus on during your interview practice.</p>
                <div class="text-left">
                    <div id="skills-options" class="space-y-3">
                        <!-- Skills will be populated dynamically based on role and experience -->
                    </div>
                </div>
                <button id="skills-next-btn" class="mt-8 w-full bg-blue-600 text-white font-bold py-3 px-4 rounded-md hover:bg-blue-700 transition duration-300">Next</button>
            </div>
        </div>

        <!-- Act II: The Preparation Hub (Dashboard) -->
        <div id="dashboard-screen" class="hidden screen-container">
            <div class="card w-full">
                <h2 class="text-3xl font-bold text-gray-900">Your Preparation Hub</h2>
                <div class="mt-6 p-6 bg-blue-50 border border-blue-200 rounded-lg">
                    <h3 class="text-xl font-bold text-blue-800">Your Personalized Mock Interview is Ready</h3>
                    <p id="dashboard-role-company" class="text-blue-600 mt-1"></p>
                    <p class="text-sm text-blue-700 mt-2">Practice with our AI interviewer through text-based conversation</p>
                    <button id="go-to-interview-prep-btn" class="mt-4 bg-blue-600 text-white font-bold py-3 px-5 rounded-md hover:bg-blue-700 transition duration-300">Start Interview</button>
                </div>
                <div class="mt-6 grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div class="p-6 bg-gray-50 rounded-lg border">
                        <h4 class="font-bold text-gray-800">Key Skills to Practice</h4>
                        <ul id="key-skills-list" class="mt-3 text-gray-600 list-disc list-inside">
                            <li class="animate-pulse">Analyzing job description...</li>
                        </ul>
                    </div>
                    <div class="p-6 bg-gray-50 rounded-lg border">
                        <h4 class="font-bold text-gray-800">Quick Drills</h4>
                        <p class="mt-3 text-gray-600">Practice your "Tell Me About Yourself" pitch. (Coming Soon)</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Act III, Scene 1: Interview Preparation -->
        <div id="interview-prep-screen" class="hidden screen-container">
            <div class="card text-center">
                <h2 class="text-3xl font-bold text-gray-900">Ready to Begin Your Interview?</h2>
                <p class="text-lg text-gray-600 mt-4">You'll be having a text-based conversation with our AI interviewer.</p>
                <div class="my-6 p-6 bg-blue-50 border border-blue-200 rounded-lg">
                    <h3 class="text-lg font-bold text-blue-800">Interview Format</h3>
                    <ul class="text-left text-blue-700 mt-3 space-y-2">
                        <li>• Text-based questions and answers</li>
                        <li>• Take your time to think and respond</li>
                        <li>• Use the notepad to jot down thoughts</li>
                        <li>• Focus on demonstrating your skills</li>
                        <li>• Press Enter to send, Shift+Enter for new lines</li>
                    </ul>
                </div>
                <div class="p-4 bg-yellow-50 text-yellow-800 rounded-lg mb-6">
                    <p><span class="font-bold">Pro Tip:</span> Think of this as a written conversation. You can edit your responses before sending, take time to structure your thoughts, and reference the notepad for key points.</p>
                </div>
                <div class="p-4 bg-green-50 text-green-800 rounded-lg">
                    <p><span class="font-bold">Remember:</span> This is a practice field. The goal is progress, not perfection. Take a deep breath. You're ready.</p>
                </div>
                <button id="start-interview-btn" class="mt-8 w-full bg-green-600 text-white font-bold py-3 px-4 rounded-md hover:bg-green-700 transition duration-300">Begin Interview</button>
            </div>
        </div>

        <!-- Act III, Scene 2: The Interview -->
        <div id="interview-screen" class="hidden card flex flex-col" style="height: 90vh; max-height: 90vh;">
            <div class="flex-grow flex flex-col md:flex-row gap-4 overflow-hidden">
                <!-- Chat Window -->
                <div class="flex-grow flex flex-col">
                    <h2 class="text-xl font-semibold mb-2 text-center">Text-Based Interview in Progress</h2>
                    <p class="text-sm text-gray-600 text-center mb-3">Type your responses below. Take your time to think and answer thoughtfully.</p>
                    <div id="chat-window" class="flex-grow border rounded-lg p-4 overflow-y-auto flex flex-col gap-4 bg-gray-50">
                        <!-- Chat messages appear here -->
                    </div>
                </div>
                <!-- Notepad & Timer -->
                <div class="w-full md:w-64 flex-shrink-0 flex flex-col gap-4">
                    <div class="flex-grow flex flex-col">
                         <label for="notepad" class="font-semibold mb-1">Private Notepad</label>
                         <textarea id="notepad" class="w-full flex-grow border rounded-lg p-2 text-sm" placeholder="Jot down your thoughts..."></textarea>
                    </div>
                    <div id="timer" class="text-center font-mono text-lg p-2 border rounded-lg">00:00</div>
                </div>
            </div>
             <div class="flex gap-4 mt-4">
                <textarea id="chat-input" class="flex-grow p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 resize-none" rows="3" placeholder="Type your answer... (Press Enter to send, Shift+Enter for new line)" disabled></textarea>
                <button id="send-btn" class="bg-blue-600 text-white font-bold py-3 px-4 rounded-md hover:bg-blue-700 disabled:bg-gray-400 self-end" disabled>Send</button>
            </div>
            <button id="end-interview-btn" class="mt-4 w-full bg-red-600 text-white font-bold py-3 px-4 rounded-md hover:bg-red-700">End Interview & Get Feedback</button>
        </div>

        <!-- Act IV: Analysis Loader -->
        <div id="analysis-screen" class="hidden screen-container">
            <div class="card text-center">
                 <h2 class="text-3xl font-bold text-gray-900 mb-4">Analyzing Your Performance...</h2>
                 <p class="text-lg text-gray-600 mb-8">Generating your personalized feedback report.</p>
                 <div class="flex justify-center"><div class="loader"></div></div>
            </div>
        </div>

        <!-- Act IV: Feedback Report -->
        <div id="feedback-screen" class="hidden screen-container">
            <div class="card">
                <h2 class="text-3xl font-bold text-gray-900 mb-6 text-center">Your Actionable Feedback Report</h2>
                <div id="feedback-output" class="space-y-6"></div>
                <button onclick="restart()" class="mt-8 w-full bg-blue-600 text-white font-bold py-3 px-4 rounded-md hover:bg-blue-700">Start a New Interview</button>
            </div>
        </div>

    </div>

    <script src="app.js"></script>